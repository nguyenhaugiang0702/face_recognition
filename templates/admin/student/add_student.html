<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Panel</title>
    <link
      href="{{ url_for('static', filename='styles/admin.css') }}"
      rel="stylesheet"
      type="text/css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />
    <link
      href="{{ url_for('static', filename='styles/add_user.css') }}"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="{{ url_for('static', filename='styles/loading.css') }}"
      rel="stylesheet"
      type="text/css"
    />
  </head>
  <body>
    <div class="container">
      {% include 'components/sidebar/sidebar_admin.html' %}
      <br />
      <br />
      <section class="form_add">
        <header>Add Student</header>
        <form
          id="addStudentForm"
          action="/admin/add_user"
          method="post"
          class="form"
          enctype="multipart/form-data"
          onsubmit="showOverlay()"
        >
          <div class="input-box">
            <label>ID</label>
            <input
              type="text"
              placeholder="Enter the student unique ID"
              name="id"
              required
            />
          </div>
          <div class="input-box">
            <label>Full Name</label>
            <input
              type="text"
              placeholder="Enter full name"
              name="name"
              required
            />
          </div>
          <div class="input-box">
            <label>Password</label>
            <input
              type="password"
              placeholder="Enter the password"
              name="password"
              required
            />
          </div>
          <div class="input-box">
            <label>Email Address</label>
            <input
              type="email"
              placeholder="Enter email address"
              name="email"
              required
            />
          </div>
          <div class="column">
            <div class="input-box">
              <label>Phone Number</label>
              <input
                type="text"
                placeholder="Enter phone number"
                name="phone"
                required
              />
            </div>
            <div class="input-box">
              <label>Birth Date</label>
              <input
                type="date"
                placeholder="Enter birth date"
                name="dob"
                required
              />
            </div>
          </div>
          <div class="input-box address">
            <label>Address</label>
            <div class="column">
              <input
                type="text"
                placeholder="Enter your city"
                name="city"
                required
              />
              <div class="select-box">
                <select name="country">
                  <option hidden>Country</option>
                  <option>Viet Nam</option>
                  <option>Canada</option>
                  <option>USA</option>
                  <option>India</option>
                  <option>Nepal</option>
                  <option>Japan</option>
                  <option>UK</option>
                </select>
              </div>
            </div>
          </div>
          <div class="input-box">
            <label>Major</label>
            <input
              type="text"
              placeholder="Enter the Major"
              name="major"
              required
            />
          </div>
          <div class="input-box">
            <label>Starting Year</label>
            <input
              type="number"
              placeholder="Enter the Starting Year"
              name="starting_year"
              required
            />
          </div>
          <div class="input-box">
            <label>Current Year</label>
            <input
              type="number"
              placeholder="Enter the Current Year"
              name="year"
              required
            />
          </div>
          <div class="input-box">
            <label>Total Attendance</label>
            <input
              type="number",
              min="0"
              placeholder="Enter the Attendance Number"
              name="total_attendance"
              required
            />
          </div>
          <div class="column">
            <div class="input-box">
              <label>Last Attendance Date</label>
              <input
                type="date"
                placeholder="Enter the Last Attendance Date (YYYY-MM-DD)"
                name="last_attendance_date"
                required
              />
            </div>

            <div class="input-box">
              <label>Last Attendance Time</label>
              <input
                type="time"
                placeholder="Enter the Last Attendance Time (HH:MM:SS)"
                name="last_attendance_time"
                required
              />
            </div>
          </div>

          <div class="input-box">
            <label>Notes</label>
            <input
              type="textarea"
              placeholder="Enter any notes"
              name="content"
              required
            />
          </div>

          <div class="input-box">
            <label>Upload Image</label>
            <input
              type="file"
              placeholder="Upload the new student image"
              name="image"
              value="image"
              required
            />
          </div>
          <button type="submit">Submit</button>
        </form>
      </section>
    </div>
    <!-- Overlay và biểu tượng loading -->
    <div id="overlay">
      <div class="loader"></div>
    </div>
    <script>
      // Tắt loading khi trang đã tải xong
      window.addEventListener('load', function() {
        document.getElementById("overlay").style.display = "none";
      });
      
      // Sử dụng sự kiện submit form để hiển thị loading
      document.getElementById("addStudentForm").addEventListener("submit", function(event) {
        document.getElementById("overlay").style.display = "flex";
      });

      // Hiển thị alert khi có thông báo lỗi từ server
      window.onload = function() {
        var errorMessage = "{{ message }}";
        if (errorMessage) {
            alert(errorMessage);
        }
      };
  </script>
  </body>
  
</html>
